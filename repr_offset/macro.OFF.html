<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Gets the `FieldOffset` for the passed in type and (possibly nested) field."><title>OFF in repr_offset - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="repr_offset" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.1 (3f5fd8dd4 2024-08-06)" data-channel="1.80.1" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc macro"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../repr_offset/index.html">repr_offset</a><span class="version">0.2.2</span></h2></div><div class="sidebar-elems"></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Macro <a href="index.html">repr_offset</a>::<wbr><a class="macro" href="#">OFF</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/repr_offset/macros/off_macro.rs.html#56-87">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><span class="macro">macro_rules!</span> OFF {
    (
        $(:: $(@<span class="macro-nonterminal">$leading</span>:tt@)<span class="question-mark">? </span>)<span class="question-mark">? </span><span class="macro-nonterminal">$first</span>:ident $(:: <span class="macro-nonterminal">$trailing</span>:ident)* ;
        $(<span class="macro-nonterminal">$fields</span>:tt).+
    ) =&gt; { ... };
    (<span class="macro-nonterminal">$</span><span class="kw">type</span>:<span class="macro-nonterminal">ty</span>; $(<span class="macro-nonterminal">$fields</span>:tt).+ ) =&gt; { ... };
}</pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Gets the <a href="./struct.FieldOffset.html"><code>FieldOffset</code></a> for the passed in type and (possibly nested) field.</p>
<p>This macro allows accessing private fields, following the normal Rust rules around privacy.</p>
<p>This macro doesn’t allow accessing fields from type parameters in generic functions,
for that you can use <code>PUB_OFF</code>,
but it can only get the <a href="./struct.FieldOffset.html"><code>FieldOffset</code></a> for public fields.</p>
<h2 id="type-argument"><a class="doc-anchor" href="#type-argument">§</a>Type Argument</h2>
<p>The type parameter can be passed as either:</p>
<ul>
<li>
<p>The path to the type (including the type name)</p>
</li>
<li>
<p>A type with generic arguments</p>
</li>
</ul>
<h4 id="caveats-with-path-argument"><a class="doc-anchor" href="#caveats-with-path-argument">§</a>Caveats with path argument</h4>
<p>With the path way of passing the type,
if the type has all type parameters defaulted or is otherwise generic,
there can be type inference issues.</p>
<p>To fix type inference issues with defaulted types,
you can write <code>&lt;&gt;</code> (eg: <code>OFF!(for_examples::ReprC&lt;&gt;; a.b)</code>).</p>
<p>If a generic type is passed, and its arguments can be inferred from context,
it’s only necessary to specify the type of the accessed field,
otherwise you need to write the full type.</p>
<h2 id="example"><a class="doc-anchor" href="#example">§</a>Example</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>repr_offset::{
    for_examples::ReprC,
    OFF,
    FieldOffset, ROExtAcc,
};

<span class="kw">let </span>this = ReprC {a: <span class="number">3u8</span>, b: <span class="number">5u8</span>, c: <span class="number">8u8</span>, d: <span class="number">13u8</span>};

<span class="comment">// Passing the type as a path
</span><span class="macro">assert_eq!</span>(<span class="macro">OFF!</span>(ReprC; a).get(<span class="kw-2">&amp;</span>this), <span class="kw-2">&amp;</span>this.a);

<span class="comment">// Passing the type as a type
</span><span class="macro">assert_eq!</span>(<span class="macro">OFF!</span>(ReprC&lt;<span class="kw">_</span>, <span class="kw">_</span>, <span class="kw">_</span>, <span class="kw">_</span>&gt;; b).get(<span class="kw-2">&amp;</span>this), <span class="kw-2">&amp;</span>this.b);

<span class="comment">// Passing the type as a path
</span><span class="macro">assert_eq!</span>(this.f_get(<span class="macro">OFF!</span>(ReprC; c)), <span class="kw-2">&amp;</span>this.c);

<span class="comment">// Passing the type as a type
</span><span class="macro">assert_eq!</span>(this.f_get(<span class="macro">OFF!</span>(ReprC&lt;<span class="kw">_</span>, <span class="kw">_</span>, <span class="kw">_</span>, <span class="kw">_</span>&gt;; d)), <span class="kw-2">&amp;</span>this.d);</code></pre></div>
</div></details></section></div></main></body></html>